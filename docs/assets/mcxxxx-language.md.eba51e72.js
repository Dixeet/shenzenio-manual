import{_ as e,o as t,c as n,Q as a}from"./chunks/framework.9e21ba36.js";const g=JSON.parse('{"title":"MCxxxx Family Language Reference","description":"","frontmatter":{},"headers":[],"relativePath":"mcxxxx-language.md","filePath":"mcxxxx-language.md"}'),o={name:"mcxxxx-language.md"},s=a(`<hr><h1 id="mcxxxx-family-language-reference" tabindex="-1">MCxxxx Family <br>Language Reference <a class="header-anchor" href="#mcxxxx-family-language-reference" aria-label="Permalink to &quot;MCxxxx Family &lt;br&gt;Language Reference&quot;">​</a></h1><hr><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>The MCxxxx family of microcontrollers employs a common programming system to simplify system design and reduce new product development time. A program written for one member of the MCxxxx family can be re-used in any other MCxxxx microcontroller with few or no changes (see note <a href="/shenzenio-manual/mcxxxx-language.html#note-1">[1]</a>).</p><p>Programs for the MCxxxx are assembled from a small but versatile set of operations. Each line of an MCxxxx program can contain an instruction, which consists of the instruction’s name followed by zero or more instruction operands. Detailed descriptions of the available instructions and their usage are provided below.</p><p>MCxxxx microcontrollers are designed to be used in power-constrained environments and applications, and the MCxxxx programming system has been designed accordingly. While a MCxxxx microcontroller is in a sleep state, it consumes no power. Otherwise, power consumption is proportional to the number of instructions executed.</p><p id="note-1"><em>[1] MCxxxx microcontrollers have varying features, pinouts, and program space limitations, described in the modelspecific datasheets. Some adaptation may be required to account for these model-specific differences.</em></p><h2 id="program-structure" tabindex="-1">Program Structure <a class="header-anchor" href="#program-structure" aria-label="Permalink to &quot;Program Structure&quot;">​</a></h2><p>Each line of an MCxxxx program must have the following structure:</p><p><code>LABEL CONDITION INSTRUCTION COMMENT</code></p><p>All components are optional, but must appear in the specified order if present. Examples of syntactically valid lines:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"># This line is a comment.</span></span>
<span class="line"><span style="color:#e1e4e8;">loop: # until ACC is ten</span></span>
<span class="line"><span style="color:#e1e4e8;">teq acc 10</span></span>
<span class="line"><span style="color:#e1e4e8;">+ jmp end</span></span>
<span class="line"><span style="color:#e1e4e8;">  mov 50 x2</span></span>
<span class="line"><span style="color:#e1e4e8;">  add 1</span></span>
<span class="line"><span style="color:#e1e4e8;">  jmp loop</span></span>
<span class="line"><span style="color:#e1e4e8;">  end:</span></span>
<span class="line"><span style="color:#e1e4e8;">  mov 0 acc # reset counter</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># This line is a comment.</span></span>
<span class="line"><span style="color:#24292e;">loop: # until ACC is ten</span></span>
<span class="line"><span style="color:#24292e;">teq acc 10</span></span>
<span class="line"><span style="color:#24292e;">+ jmp end</span></span>
<span class="line"><span style="color:#24292e;">  mov 50 x2</span></span>
<span class="line"><span style="color:#24292e;">  add 1</span></span>
<span class="line"><span style="color:#24292e;">  jmp loop</span></span>
<span class="line"><span style="color:#24292e;">  end:</span></span>
<span class="line"><span style="color:#24292e;">  mov 0 acc # reset counter</span></span></code></pre></div><h2 id="comments" tabindex="-1">Comments <a class="header-anchor" href="#comments" aria-label="Permalink to &quot;Comments&quot;">​</a></h2><p>Any text following a <code>#</code> symbol is ignored until the end of the line. Comments improve developer productivity by allowing the behavior of code to be described in-line with the program itself.</p><h2 id="labels" tabindex="-1">Labels <a class="header-anchor" href="#labels" aria-label="Permalink to &quot;Labels&quot;">​</a></h2><p>Labels must appear first on a line, and are followed by a colon <code>:</code>. Labels are used as jump targets by the jmp instruction. Labels must begin with a letter and may contain alphabetic, numeric, and underscore characters.</p><h2 id="conditional-execution" tabindex="-1">Conditional Execution <a class="header-anchor" href="#conditional-execution" aria-label="Permalink to &quot;Conditional Execution&quot;">​</a></h2><p>All instructions in the MCxxxx programming language are capable of <strong>conditional execution</strong>. Prefixing an instruction with a <code>+</code> or <code>-</code> symbol will cause that instruction to be enabled or disabled by <strong>test instructions</strong>. When an instruction is disabled by a test instruction, it will be skipped and will not consume power. Instructions with no prefix are never disabled and always execute normally. All conditional instructions start in a disabled state. A test instruction must be executed to enable conditional instructions.</p><p>For an example of conditional instructions in use, see <a href="/shenzenio-manual/application-notes/an650.html">Application Note 650: Touch-Activated Light Controller</a>.</p><h2 id="registers" tabindex="-1">Registers <a class="header-anchor" href="#registers" aria-label="Permalink to &quot;Registers&quot;">​</a></h2><p>Registers are used as sources and destinations for data manipulated by MCxxxx instructions. The set of registers varies between MCxxxx models. It is an error to use a register in a microcontroller program if that register is not present on that microcontroller.</p><p><code>acc</code> is the primary general-purpose register used for internal computation on MCxxxx family microcontrollers. All arithmetic operations implicitly use and modify the value of <code>acc</code>.</p><p><code>dat</code> is a second register available on some MCxxxx family members. It can be used in most contexts where acc is permitted.</p><p>The internal registers of MCxxxx microprocessors (<code>acc</code> and <code>dat</code>, if available) are initialized to the value 0.</p><p>The pin registers (<code>p0</code>, <code>p1</code>, <code>x0</code>, <code>x1</code>, <code>x2</code>, <code>x3</code>) are used when reading from or writing to the pins of MCxxxx microcontrollers. Reading and writing through the pins allows a single MCxxxx microcontroller to communicate and coordinate with other connected, compatible devices. Each pin on an MCxxxx family microcontroller functions as either a simple I/O or XBus interface. Refer to the appropriate datasheet for details on pin functionality.</p><p><code>null</code> is a pseudo-register. Reading from the null register produces the value 0. Writing to the null register has no effect</p><h2 id="instruction-operands" tabindex="-1">Instruction Operands <a class="header-anchor" href="#instruction-operands" aria-label="Permalink to &quot;Instruction Operands&quot;">​</a></h2><p>Each type of instruction requires a fixed number of operands. If an instruction has any associated operands, they must appear following the instruction name, separated by spaces. For the benefit of development productivity, the MCxxxx programming system does not require the use of redundant punctuation to separate instruction operands.</p><p>Instruction operands are described with the following notation:</p><table><thead><tr><th style="text-align:left;">Notation</th><th style="text-align:left;">Meaning</th></tr></thead><tbody><tr><td style="text-align:left;">R</td><td style="text-align:left;">Register</td></tr><tr><td style="text-align:left;">I</td><td style="text-align:left;">Integer <a href="/shenzenio-manual/mcxxxx-language.html#note-1b">[1]</a></td></tr><tr><td style="text-align:left;">R/I</td><td style="text-align:left;">Register or integer <a href="/shenzenio-manual/mcxxxx-language.html#note-1b">[1]</a></td></tr><tr><td style="text-align:left;">P</td><td style="text-align:left;">Pin register (p0, p1, etc.)</td></tr><tr><td style="text-align:left;">L</td><td style="text-align:left;">Label <a href="/shenzenio-manual/mcxxxx-language.html#note-2">[2]</a></td></tr></tbody></table><p><em id="note-1b">[1] Integer values must be in the range -999 to 999.</em></p><p><em id="note-2">[2] Labels used as operands must be defined elsewhere in the program</em></p><h2 id="basic-instructions" tabindex="-1">Basic Instructions <a class="header-anchor" href="#basic-instructions" aria-label="Permalink to &quot;Basic Instructions&quot;">​</a></h2><p><code>nop</code><br> This instruction has no effect.</p><p><code>mov R/I R</code><br> Copy the value of the first operand into the second operand.</p><p><code>jmp L</code><br> Jump to the instruction following the specified label.</p><p><code>slp R/I</code><br> Sleep for the number of time units specified by the operand.</p><p><code>slx P</code><br> Sleep until data is available to be read on the XBus pin specified by the operand.</p><h2 id="arithmetic-instructions" tabindex="-1">Arithmetic Instructions <a class="header-anchor" href="#arithmetic-instructions" aria-label="Permalink to &quot;Arithmetic Instructions&quot;">​</a></h2><p>Registers can store integer values between <code>-999</code> and <code>999</code>, inclusive. If an arithmetic operation would produce a result outside this range, the closest allowed value is stored instead. For example, if <code>acc</code> contains the value <code>800</code> and the instruction add <code>400</code> is executed, then the value <code>999</code> will be stored in <code>acc</code>.</p><p><code>add R/I</code><br> Add the value of the first operand to the value of the acc register and store the result in the acc register.</p><p><code>sub R/I</code><br> Subtract the value of the first operand from the value of the acc register and store the result in the acc register.</p><p><code>mul R/I</code><br> Multiply the value of the first operand by the value of the acc register and store the result in the acc register.</p><p><code>not</code><br> If the value in acc is 0, store a value of 100 in acc. Otherwise, store a value of 0 in acc.</p><p><code>dgt R/I</code><br> Isolate the specified digit of the value in the acc register and store the result in the acc register.</p><p><code>dst R/I R/I</code><br> Set the digit of acc specified by the first operand to the value of the second operand.</p><p>Examples of the dgt and dst instructions:</p><table><thead><tr><th style="text-align:center;">acc</th><th style="text-align:center;">Instruction</th><th style="text-align:center;">acc&#39;</th></tr></thead><tbody><tr><td style="text-align:center;">596</td><td style="text-align:center;">dgt 0</td><td style="text-align:center;">6</td></tr><tr><td style="text-align:center;">596</td><td style="text-align:center;">dgt 1</td><td style="text-align:center;">9</td></tr><tr><td style="text-align:center;">596</td><td style="text-align:center;">dgt 2</td><td style="text-align:center;">5</td></tr><tr><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">596</td><td style="text-align:center;">dst 0 7</td><td style="text-align:center;">597</td></tr><tr><td style="text-align:center;">596</td><td style="text-align:center;">dst 1 7</td><td style="text-align:center;">576</td></tr><tr><td style="text-align:center;">596</td><td style="text-align:center;">dst 2 7</td><td style="text-align:center;">796</td></tr></tbody></table><h2 id="test-instructions" tabindex="-1">Test Instructions <a class="header-anchor" href="#test-instructions" aria-label="Permalink to &quot;Test Instructions&quot;">​</a></h2><p>For more information on conditional execution and the <code>+</code> or <code>-</code> symbols, see <a href="/shenzenio-manual/mcxxxx-language.html#conditional-execution">Conditional Execution</a></p><p><code>teq R/I R/I</code><br> Test if the value of the first operand (A) is equal to the value of the second operand (B).</p><table><thead><tr><th style="text-align:center;">Condition</th><th style="text-align:center;">Effect on ‘+’ Instructions</th><th style="text-align:center;">Effect on ‘-’ Instructions</th></tr></thead><tbody><tr><td style="text-align:center;">A is equal to B</td><td style="text-align:center;">Enabled</td><td style="text-align:center;">Disabled</td></tr><tr><td style="text-align:center;">A is not equal to B</td><td style="text-align:center;">Disabled</td><td style="text-align:center;">Enabled</td></tr></tbody></table><p><code>tgt R/I R/I</code><br> Test if the value of the first operand (A) is greater than the value of the second operand (B).</p><table><thead><tr><th style="text-align:center;">Condition</th><th style="text-align:center;">Effect on ‘+’ Instructions</th><th style="text-align:center;">Effect on ‘-’ Instructions</th></tr></thead><tbody><tr><td style="text-align:center;">A is greater than B</td><td style="text-align:center;">Enabled</td><td style="text-align:center;">Disabled</td></tr><tr><td style="text-align:center;">A is not greater than B</td><td style="text-align:center;">Disabled</td><td style="text-align:center;">Enabled</td></tr></tbody></table><p><code>tlt R/I R/I</code><br> Test if the value of the first operand (A) is less than the value of the second operand (B)</p><table><thead><tr><th style="text-align:center;">Condition</th><th style="text-align:center;">Effect on ‘+’ Instructions</th><th style="text-align:center;">Effect on ‘-’ Instructions</th></tr></thead><tbody><tr><td style="text-align:center;">A is less than B</td><td style="text-align:center;">Enabled</td><td style="text-align:center;">Disabled</td></tr><tr><td style="text-align:center;">A is not less than B</td><td style="text-align:center;">Disabled</td><td style="text-align:center;">Enabled</td></tr></tbody></table><p><code>tcp R/I R/I</code><br> Compare the value of the first operand (A) to the value of the second operand (B).</p><table><thead><tr><th style="text-align:center;">Condition</th><th style="text-align:center;">Effect on ‘+’ Instructions</th><th style="text-align:center;">Effect on ‘-’ Instructions</th></tr></thead><tbody><tr><td style="text-align:center;">A is greater than B</td><td style="text-align:center;">Enabled</td><td style="text-align:center;">Disabled</td></tr><tr><td style="text-align:center;">A is equal to B</td><td style="text-align:center;">Disabled</td><td style="text-align:center;">Disabled</td></tr><tr><td style="text-align:center;">A is less than B</td><td style="text-align:center;">Disabled</td><td style="text-align:center;">Enabled</td></tr></tbody></table>`,59),r=[s];function i(l,c,d,p,h,x){return t(),n("div",null,r)}const m=e(o,[["render",i]]);export{g as __pageData,m as default};
